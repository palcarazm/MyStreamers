{"version":3,"sources":["admin/config.js","admin/main.js"],"names":["verifyDB","$","on","e","preventDefault","callAPI","this","attr","FormData","find","filter","length","remove","removeClass","addClass","show","uri","method","formdata","requiered","callback","forEach","input","swal","type","title","html","timer","ajax","data","url","dataType","contentType","processData","async","cache","success","status","message","then","currentURL","document","location","href","replace","origin","split"],"mappings":"AAIA,SAAAA,WACAC,EAAA,kBAAAC,GAAA,UAAA,SAAAC,GACAA,EAAAC,iBACAC,QACAJ,EAAAK,MAAAC,KAAA,UACAN,EAAAK,MAAAC,KAAA,UACA,IAAAC,SAAAF,MACAL,EAAAK,MAAAG,KAAA,yBAAAC,OAAA,cAAAC,QACA,WACAV,EAAA,kBAAAW,SACAX,EAAA,mCAAAY,YAAA,wBAAAC,SAAA,gCACAb,EAAA,qBAAAc,aCWA,SAAAV,QAAAW,EAAAC,EAAAC,EAAAC,EAAAC,GACA,IAAAT,EAAA,EACAO,EAAAG,QAAAC,IACAX,IACA,MAAAW,GAAA,IAAAA,GACAC,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAA,oCACAC,MAAA,QAKAhB,EAAAQ,EACAI,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAA,oCACAC,MAAA,MAIA1B,EAAA2B,KAAA,CACAJ,KAAAP,EACAY,KAAAX,EACAY,IAAAd,EACAe,SAAA,OACAC,aAAA,EACAC,aAAA,EACAC,OAAA,EACAC,OAAA,EACAC,QAAA,SAAAP,GAEA,OAAAA,EAAAQ,OACAd,KAAA,CACAC,KAAA,UACAC,MAAA,0BACAC,KAAAG,EAAAS,QACAX,MAAA,MACAY,KAAA,IAAAnB,KAEAG,KAAA,CACAC,KAAA,QACAC,MAAA,QACAC,KAAAG,EAAAS,aAUA,SAAAE,aACA,OAAAC,SAAAC,SAAAC,KACAC,QAAAH,SAAAC,SAAAG,OAAA,IACAD,QAAA,OAAA,IACAE,MAAA,KAAA,GACAA,MAAA,KAAA,GAhFA7C,GAAA,WACA,OAAAuC,cACA,IAAA,UACAxC","file":"admin.min.js","sourcesContent":["// CONFIGURACIÓN\r\n/** Configurar base de datos\r\n *\r\n */\r\n function verifyDB() {\r\n    $(\"#verifyDB form\").on(\"submit\", function (e) {\r\n      e.preventDefault();\r\n      callAPI(\r\n        $(this).attr(\"action\"),\r\n        $(this).attr(\"method\"),\r\n        new FormData(this),\r\n        $(this).find(\"input,textarea,select\").filter(\"[required]\").length,\r\n        function () {\r\n          $('#verifyDB form').remove();\r\n          $('#verifyDB.step .card-subtitle i').removeClass('fa-circle text-muted').addClass('fa-check-circle text-success');\r\n          $('#createAdmin form').show();\r\n        }\r\n      );\r\n    });\r\n  }","// CONSTANTES\r\n\r\n// MAIN\r\n/** Funcion principal\r\n *\r\n */\r\n$(function () {\r\n  switch (currentURL()) {\r\n    case \"/config\":\r\n      verifyDB();\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n});\r\n\r\n// GLOBALES\r\n/**\r\n * Llama a un api desde un formulario\r\n * @param {String} uri Dirección de la APi\r\n * @param {String} method Tipo de solicitud\r\n * @param {FormData} formdata Datos a enviar\r\n * @param {int} requiered Valores requeridos\r\n * @param {function} callback función a ejecutar en caso de éxito\r\n */\r\nfunction callAPI(uri, method, formdata, requiered, callback) {\r\n  let length = 0;\r\n  formdata.forEach((input) => {\r\n    length++;\r\n    if (input == null || input == \"\") {\r\n      swal({\r\n        type: \"warning\",\r\n        title: \"Error\",\r\n        html: \"Todos los campos son obligatorios\",\r\n        timer: 3000,\r\n      });\r\n      return;\r\n    }\r\n  });\r\n  if (length < requiered) {\r\n    swal({\r\n      type: \"warning\",\r\n      title: \"Error\",\r\n      html: \"Todos los campos son obligatorios\",\r\n      timer: 3000,\r\n    });\r\n    return;\r\n  }\r\n  $.ajax({\r\n    type: method,\r\n    data: formdata,\r\n    url: uri,\r\n    dataType: \"json\",\r\n    contentType: false,\r\n    processData: false,\r\n    async: true,\r\n    cache: false,\r\n    success: function (data) {\r\n      //console.log(data);\r\n      if (data.status == \"200\") {\r\n        swal({\r\n          type: \"success\",\r\n          title: \"Información actualizada\",\r\n          html: data.message,\r\n          timer: 2000,\r\n        }).then(()=>callback());\r\n      } else {\r\n        swal({\r\n          type: \"error\",\r\n          title: \"Error\",\r\n          html: data.message,\r\n        });\r\n      }\r\n    },\r\n  });\r\n}\r\n/** Devuelve la URL de la página actual\r\n *\r\n * @returns URL actual\r\n */\r\nfunction currentURL() {\r\n  return document.location.href\r\n    .replace(document.location.origin, \"\")\r\n    .replace(\".php\", \"\")\r\n    .split(\"?\")[0]\r\n    .split(\"#\")[0];\r\n}\r\n"]}