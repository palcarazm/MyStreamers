{"version":3,"sources":["config.js","main.js"],"names":["verifyDB","$","on","e","preventDefault","this","find","attr","loadToggle","callAPIverbose","FormData","filter","length","removeClass","addClass","width","configAdmin","validPass","password","passwordRepeat","parent","remove","val","append","text","closest","checkPasswordStrength","trim","removeAttr","togglePassword","hasClass","RegExp","test","currentURL"],"mappings":"AAGA,SAAAA,WACAC,EAAA,kBAAAC,GAAA,UAAA,SAAAC,GACAA,EAAAC,iBACAH,EAAAI,MAAAC,KAAA,yBAAAC,KAAA,YAAA,GACAN,EAAAI,MAAAG,aACAC,eACAR,EAAAI,MAAAE,KAAA,UACAN,EAAAI,MAAAE,KAAA,UACA,IAAAG,SAAAL,MACAJ,EAAAI,MAAAC,KAAA,yBAAAK,OAAA,cAAAC,QACA,WACAX,EAAA,kBAAAO,aACAP,EAAA,kBAAAY,YAAA,WAAAC,SAAA,QACAb,EAAA,qBAAAa,SAAA,gBACAb,EAAA,sBAAAY,YAAA,QAAAC,SAAA,WACAb,EAAA,aAAAc,MAAA,UAEA,WACAd,EAAA,kBAAAO,aACAP,EAAA,kBACAK,KAAA,yBACAC,KAAA,YAAA,SAQA,SAAAS,cACAf,EAAA,qBAAAC,GAAA,UAAA,SAAAC,GACAA,EAAAC,iBACAH,EAAAI,MAAAC,KAAA,yBAAAC,KAAA,YAAA,GACAN,EAAAI,MAAAG,aACAC,eACAR,EAAAI,MAAAE,KAAA,UACAN,EAAAI,MAAAE,KAAA,UACA,IAAAG,SAAAL,MACAJ,EAAAI,MAAAC,KAAA,yBAAAK,OAAA,cAAAC,QACA,WACAX,EAAA,qBAAAO,aACAP,EAAA,qBAAAY,YAAA,WAAAC,SAAA,QACAb,EAAA,wBAAAa,SAAA,gBACAb,EAAA,qBAAAY,YAAA,QAAAC,SAAA,WACAb,EAAA,aAAAc,MAAA,UAEA,WACAd,EAAA,qBAAAO,aACAP,EAAA,qBACAK,KAAA,yBACAC,KAAA,YAAA,SASA,SAAAU,YACAhB,EAAA,sDAAAC,GACA,oCACA,WACA,MAAAgB,EAAAjB,EAAA,2BACAkB,EAAAlB,EAAA,4BACAiB,EAAAE,SAAAd,KAAA,qBAAAe,SACAF,EAAAC,SAAAd,KAAA,qBAAAe,SACAF,EAAAG,OAAAJ,EAAAI,OACAJ,EACAE,SACAG,OACAtB,EAAA,eACAa,SAAA,oBACAU,KAAA,iCAEAL,EACAC,SACAG,OACAtB,EAAA,eACAa,SAAA,oBACAU,KAAA,iCAEAL,EAAAL,SAAA,cAAAD,YAAA,YACAK,EAAAJ,SAAA,cAAAD,YAAA,YACAZ,EAAAI,MACAoB,QAAA,QACAnB,KAAA,yBACAC,KAAA,WAAA,aACAmB,sBAAAC,KAAA1B,EAAAI,MAAAiB,SAgBAH,EAAAN,YAAA,cAAAC,SAAA,YACAI,EAAAL,YAAA,cAAAC,SAAA,YACAb,EAAAI,MACAoB,QAAA,QACAnB,KAAA,yBACAsB,WAAA,cApBA3B,EAAAI,MAAAS,SAAA,cAAAD,YAAA,YACAZ,EAAAI,MACAe,SACAG,OACAtB,EAAA,eACAa,SAAA,oBACAU,KACA,qIAGAvB,EAAAI,MACAoB,QAAA,QACAnB,KAAA,yBACAC,KAAA,WAAA,gBC1FA,SAAAsB,iBACA5B,EAAA,oBAAAC,GAAA,SAAA,WACAD,EAAAI,MAAAC,KAAA,KAAAwB,SAAA,WACA7B,EAAAI,MAAAoB,QAAA,gBAAAnB,KAAA,SAAAC,KAAA,OAAA,QACAN,EAAAI,MAAAC,KAAA,KAAAQ,SAAA,gBAAAD,YAAA,YAEAZ,EAAAI,MAAAoB,QAAA,gBAAAnB,KAAA,SAAAC,KAAA,OAAA,YACAN,EAAAI,MAAAC,KAAA,KAAAQ,SAAA,UAAAD,YAAA,oBAIA,SAAAa,sBAAAR,GACA,OAAA,IAAAa,OACA,gEACAC,KAAAd,GA7BAjB,GAAA,WACA,OAAAgC,cACA,IAAA,UACAJ,iBACA7B,WACAgB,cACAC","file":"admin.min.js","sourcesContent":["/** Configurar base de datos\r\n *\r\n */\r\nfunction verifyDB() {\r\n  $(\"#verifyDB form\").on(\"submit\", function (e) {\r\n    e.preventDefault();\r\n    $(this).find('button[type=\"submit\"]').attr(\"disabled\", true);\r\n    $(this).loadToggle();\r\n    callAPIverbose(\r\n      $(this).attr(\"action\"),\r\n      $(this).attr(\"method\"),\r\n      new FormData(this),\r\n      $(this).find(\"input,textarea,select\").filter(\"[required]\").length,\r\n      function () {\r\n        $(\"#verifyDB form\").loadToggle();\r\n        $(\"#verifyDB.step\").removeClass(\"current\").addClass(\"done\");\r\n        $(\"#verifyDB.step h2\").addClass(\"text-success\");\r\n        $(\"#configAdmin.step \").removeClass(\"todo\").addClass(\"current\");\r\n        $(\"#progreso\").width(\"33%\");\r\n      },\r\n      function () {\r\n        $(\"#verifyDB form\").loadToggle();\r\n        $(\"#verifyDB form\")\r\n          .find('button[type=\"submit\"]')\r\n          .attr(\"disabled\", false);\r\n      }\r\n    );\r\n  });\r\n}\r\n/** Configurar administrador\r\n *\r\n */\r\nfunction configAdmin() {\r\n  $(\"#configAdmin form\").on(\"submit\", function (e) {\r\n    e.preventDefault();\r\n    $(this).find('button[type=\"submit\"]').attr(\"disabled\", true);\r\n    $(this).loadToggle();\r\n    callAPIverbose(\r\n      $(this).attr(\"action\"),\r\n      $(this).attr(\"method\"),\r\n      new FormData(this),\r\n      $(this).find(\"input,textarea,select\").filter(\"[required]\").length,\r\n      function () {\r\n        $(\"#configAdmin form\").loadToggle();\r\n        $(\"#configAdmin.step\").removeClass(\"current\").addClass(\"done\");\r\n        $(\"#configAdmin.step h2\").addClass(\"text-success\");\r\n        $(\"#siteConfig.step \").removeClass(\"todo\").addClass(\"current\");\r\n        $(\"#progreso\").width(\"67%\");\r\n      },\r\n      function () {\r\n        $(\"#configAdmin form\").loadToggle();\r\n        $(\"#configAdmin form\")\r\n          .find('button[type=\"submit\"]')\r\n          .attr(\"disabled\", false);\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * Valida contraseñas coincidentes\r\n */\r\nfunction validPass() {\r\n  $(\"#configAdmin form #pass2 , #configAdmin form #pass\").on(\r\n    \"input keyup keypress blur change\",\r\n    function () {\r\n      const password = $(\"#configAdmin form #pass\");\r\n      const passwordRepeat = $(\"#configAdmin form #pass2\");\r\n      password.parent().find(\".invalid-feedback\").remove();\r\n      passwordRepeat.parent().find(\".invalid-feedback\").remove();\r\n      if (passwordRepeat.val() != password.val()) {\r\n        password\r\n          .parent()\r\n          .append(\r\n            $(\"<div></div>\")\r\n              .addClass(\"invalid-feedback\")\r\n              .text(\"Las contraseñas no coinciden\")\r\n          );\r\n        passwordRepeat\r\n          .parent()\r\n          .append(\r\n            $(\"<div></div>\")\r\n              .addClass(\"invalid-feedback\")\r\n              .text(\"Las contraseñas no coinciden\")\r\n          );\r\n        passwordRepeat.addClass(\"is-invalid\").removeClass(\"is-valid\");\r\n        password.addClass(\"is-invalid\").removeClass(\"is-valid\");\r\n        $(this)\r\n          .closest(\"form\")\r\n          .find('button[type=\"submit\"]')\r\n          .attr(\"disabled\", \"disabled\");\r\n      } else if (!checkPasswordStrength(trim($(this).val()))) {\r\n        $(this).addClass(\"is-invalid\").removeClass(\"is-valid\");\r\n        $(this)\r\n          .parent()\r\n          .append(\r\n            $(\"<div></div>\")\r\n              .addClass(\"invalid-feedback\")\r\n              .text(\r\n                \"La contraseña debe contener al menos una minúscula, una mayúscula, un número, un carácter especial y ser de almenos 8 carácteres\"\r\n              )\r\n          );\r\n        $(this)\r\n          .closest(\"form\")\r\n          .find('button[type=\"submit\"]')\r\n          .attr(\"disabled\", \"disabled\");\r\n      } else {\r\n        passwordRepeat.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n        password.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n        $(this)\r\n          .closest(\"form\")\r\n          .find('button[type=\"submit\"]')\r\n          .removeAttr(\"disabled\");\r\n      }\r\n    }\r\n  );\r\n}\r\n","$(function () {\r\n  switch (currentURL()) {\r\n    case \"/config\":\r\n      togglePassword();\r\n      verifyDB();\r\n      configAdmin();\r\n      validPass();\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n});\r\n\r\n// Funciones\r\nfunction togglePassword() {\r\n  $(\".toggle-password\").on(\"click\", function () {\r\n    if ($(this).find(\"i\").hasClass(\"fa-eye\")) {\r\n      $(this).closest(\".input-group\").find(\"input\").attr(\"type\", \"text\");\r\n      $(this).find(\"i\").addClass(\"fa-eye-slash\").removeClass(\"fa-eye\");\r\n    } else {\r\n      $(this).closest(\".input-group\").find(\"input\").attr(\"type\", \"password\");\r\n      $(this).find(\"i\").addClass(\"fa-eye\").removeClass(\"fa-eye-slash\");\r\n    }\r\n  });\r\n}\r\nfunction checkPasswordStrength(password) {\r\n  return new RegExp(\r\n    \"(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})\"\r\n  ).test(password);\r\n}\r\n"]}