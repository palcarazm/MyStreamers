{"version":3,"sources":["admin/config.js","admin/main.js"],"names":["verifyDB","$","on","e","preventDefault","callAPIverbose","this","attr","FormData","find","filter","length","removeClass","addClass","width","togglePassword","hasClass","closest","uri","method","formdata","requiered","success","error","forEach","input","swal","type","title","html","timer","ajax","data","url","dataType","contentType","processData","async","cache","message","then","currentURL","document","location","href","replace","origin","split"],"mappings":"AAIA,SAAAA,WACAC,EAAA,kBAAAC,GAAA,UAAA,SAAAC,GACAA,EAAAC,iBACAC,eACAJ,EAAAK,MAAAC,KAAA,UACAN,EAAAK,MAAAC,KAAA,UACA,IAAAC,SAAAF,MACAL,EAAAK,MAAAG,KAAA,yBAAAC,OAAA,cAAAC,QACA,WACAV,EAAA,kBAAAW,YAAA,WAAAC,SAAA,QACAZ,EAAA,mCAAAW,YAAA,wBAAAC,SAAA,gCACAZ,EAAA,sBAAAW,YAAA,QAAAC,SAAA,WACAZ,EAAA,aAAAa,MAAA,aCGA,SAAAC,iBACAd,EAAA,oBAAAC,GAAA,SAAA,WACAD,EAAAK,MAAAG,KAAA,KAAAO,SAAA,WACAf,EAAAK,MAAAW,QAAA,gBAAAR,KAAA,SAAAF,KAAA,OAAA,QACAN,EAAAK,MAAAG,KAAA,KAAAI,SAAA,gBAAAD,YAAA,YAEAX,EAAAK,MAAAW,QAAA,gBAAAR,KAAA,SAAAF,KAAA,OAAA,YACAN,EAAAK,MAAAG,KAAA,KAAAI,SAAA,UAAAD,YAAA,oBAeA,SAAAP,eACAa,EACAC,EACAC,EACAC,EACAC,EAAA,KACAC,EAAA,MAEA,IAAAZ,EAAA,EACAS,EAAAI,QAAAC,IACAd,IACA,MAAAc,GAAA,IAAAA,GACAC,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAA,oCACAC,MAAA,QAKAnB,EAAAU,EACAK,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAA,oCACAC,MAAA,MAIA7B,EAAA8B,KAAA,CACAJ,KAAAR,EACAa,KAAAZ,EACAa,IAAAf,EACAgB,SAAA,OACAC,aAAA,EACAC,aAAA,EACAC,OAAA,EACAC,OAAA,EACAhB,QAAA,SAAAU,GAEA,MAAAV,EACAI,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAAG,EAAAO,QACAT,MAAA,MAGAJ,KAAA,CACAC,KAAA,UACAC,MAAA,QACAC,KAAAG,EAAAO,QACAT,MAAA,MACAU,KAAA,IAAAlB,MAGAC,MAAA,SAAAS,GAEA,MAAAT,EACAG,KAAA,CACAC,KAAA,QACAC,MAAA,QACAC,KAAAG,EAAAO,UAGAb,KAAA,CACAC,KAAA,QACAC,MAAA,QACAC,KAAAG,EAAAO,UACAC,KAAA,IAAAjB,QASA,SAAAkB,aACA,OAAAC,SAAAC,SAAAC,KACAC,QAAAH,SAAAC,SAAAG,OAAA,IACAD,QAAA,OAAA,IACAE,MAAA,KAAA,GACAA,MAAA,KAAA,GAvHA9C,GAAA,WACA,OAAAwC,cACA,IAAA,UACA1B,iBACAf","file":"admin.min.js","sourcesContent":["// CONFIGURACIÓN\r\n/** Configurar base de datos\r\n *\r\n */\r\n function verifyDB() {\r\n    $(\"#verifyDB form\").on(\"submit\", function (e) {\r\n      e.preventDefault();\r\n      callAPIverbose(\r\n        $(this).attr(\"action\"),\r\n        $(this).attr(\"method\"),\r\n        new FormData(this),\r\n        $(this).find(\"input,textarea,select\").filter(\"[required]\").length,\r\n        function () {\r\n          $('#verifyDB.step').removeClass('current').addClass('done');\r\n          $('#verifyDB.step .card-subtitle i').removeClass('fa-circle text-muted').addClass('fa-check-circle text-success');\r\n          $('#createAdmin.step ').removeClass('todo').addClass('current');\r\n          $('#progreso').width(\"10%\");\r\n        }\r\n      );\r\n    });\r\n  }","// CONSTANTES\r\n\r\n// MAIN\r\n/** Funcion principal\r\n *\r\n */\r\n$(function () {\r\n  switch (currentURL()) {\r\n    case \"/config\":\r\n      togglePassword();\r\n      verifyDB();\r\n      break;\r\n\r\n    default:\r\n      break;\r\n  }\r\n});\r\n\r\n// Funciones\r\nfunction togglePassword() {\r\n  $(\".toggle-password\").on(\"click\", function () {\r\n    if ($(this).find(\"i\").hasClass(\"fa-eye\")) {\r\n      $(this).closest(\".input-group\").find(\"input\").attr(\"type\", \"text\");\r\n      $(this).find(\"i\").addClass(\"fa-eye-slash\").removeClass(\"fa-eye\");\r\n    } else {\r\n      $(this).closest(\".input-group\").find(\"input\").attr(\"type\", \"password\");\r\n      $(this).find(\"i\").addClass(\"fa-eye\").removeClass(\"fa-eye-slash\");\r\n    }\r\n  });\r\n}\r\n\r\n// GLOBALES\r\n/**\r\n * Llama a un api y muestra alertas en función del estado\r\n * @param {String} uri Dirección de la APi\r\n * @param {String} method Tipo de solicitud\r\n * @param {FormData} formdata Datos a enviar\r\n * @param {int} requiered Valores requeridos\r\n * @param {function} success función a ejecutar en caso de éxito\r\n * @param {function} error función a ejecutar en caso de error\r\n */\r\nfunction callAPIverbose(\r\n  uri,\r\n  method,\r\n  formdata,\r\n  requiered,\r\n  success = null,\r\n  error = null\r\n) {\r\n  let length = 0;\r\n  formdata.forEach((input) => {\r\n    length++;\r\n    if (input == null || input == \"\") {\r\n      swal({\r\n        type: \"warning\",\r\n        title: \"Error\",\r\n        html: \"Todos los campos son obligatorios\",\r\n        timer: 3000,\r\n      });\r\n      return;\r\n    }\r\n  });\r\n  if (length < requiered) {\r\n    swal({\r\n      type: \"warning\",\r\n      title: \"Error\",\r\n      html: \"Todos los campos son obligatorios\",\r\n      timer: 3000,\r\n    });\r\n    return;\r\n  }\r\n  $.ajax({\r\n    type: method,\r\n    data: formdata,\r\n    url: uri,\r\n    dataType: \"json\",\r\n    contentType: false,\r\n    processData: false,\r\n    async: true,\r\n    cache: false,\r\n    success: function (data) {\r\n      //console.log(data);\r\n      if (success == null) {\r\n        swal({\r\n          type: \"success\",\r\n          title: \"Éxito\",\r\n          html: data.message,\r\n          timer: 2000,\r\n        });\r\n      } else {\r\n        swal({\r\n          type: \"success\",\r\n          title: \"Éxito\",\r\n          html: data.message,\r\n          timer: 2000,\r\n        }).then(() => success());\r\n      }\r\n    },\r\n    error: function (data) {\r\n      //console.log(data);\r\n      if (error == null) {\r\n        swal({\r\n          type: \"error\",\r\n          title: \"Error\",\r\n          html: data.message,\r\n        });\r\n      } else {\r\n        swal({\r\n          type: \"error\",\r\n          title: \"Error\",\r\n          html: data.message,\r\n        }).then(() => error());\r\n      }\r\n    },\r\n  });\r\n}\r\n/** Devuelve la URL de la página actual\r\n *\r\n * @returns URL actual\r\n */\r\nfunction currentURL() {\r\n  return document.location.href\r\n    .replace(document.location.origin, \"\")\r\n    .replace(\".php\", \"\")\r\n    .split(\"?\")[0]\r\n    .split(\"#\")[0];\r\n}\r\n"]}